<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservation Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div id="name-container" class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-6">Enter Your Name</h1>
        <div class="mb-4">
            <label for="firstName" class="block text-lg font-semibold">First Name:</label>
            <input type="text" id="firstName" class="w-full p-2 border rounded-lg" required>
        </div>
        <div class="mb-4">
            <label for="lastName" class="block text-lg font-semibold">Last Name:</label>
            <input type="text" id="lastName" class="w-full p-2 border rounded-lg" required>
        </div>
        <button id="start-btn" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">Start Quiz</button>
    </div>

    <div id="quiz-container" class="hidden bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-6">Reservation Knowledge Quiz</h1>
        <div id="question-container" class="mb-6"></div>
        <div id="options-container" class="space-y-4"></div>
        <div id="feedback" class="mt-4 text-center"></div>
        <button id="next-btn" class="mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition" style="display: none;">Next Question</button>
        <button id="submit-btn" class="mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition" style="display: none;">Submit Quiz</button>
    </div>

    <div id="results-container" class="hidden bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-6">Quiz Results</h1>
        <p id="score" class="text-xl text-center mb-4"></p>
        <p id="save-status" class="text-center mb-4"></p>
        <button id="restart-btn" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition">Restart Quiz</button>
    </div>

    <script>
        const questions = [
            {
                question: "What is a guaranteed reservation?",
                options: [
                    "A reservation that can be canceled without penalty",
                    "A reservation secured with a payment or credit card",
                    "A reservation made through an OTA",
                    "A reservation with no specific check-in time"
                ],
                correct: 1
            },
            {
                question: "Which of the following is an example of an Online Travel Agency (OTA)?",
                options: [
                    "Hotel's official website",
                    "Booking.com",
                    "Phone booking",
                    "Walk-in reservation"
                ],
                correct: 1
            },
            {
                question: "What is the first step in the reservation process?",
                options: [
                    "Check-in",
                    "Inquiry",
                    "Confirmation",
                    "Payment"
                ],
                correct: 1
            },
            {
                question: "What is a key difference between direct and OTA reservations?",
                options: [
                    "Direct reservations are always more expensive",
                    "OTA reservations are made directly with the hotel",
                    "Direct reservations avoid third-party fees",
                    "OTA reservations cannot be canceled"
                ],
                correct: 2
            },
            {
                question: "What happens during the confirmation stage of the reservation process?",
                options: [
                    "Guest checks into the hotel",
                    "Guest receives booking details and confirmation number",
                    "Guest makes an inquiry about availability",
                    "Guest pays the full amount"
                ],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let firstName = '';
        let lastName = '';

        const nameContainer = document.getElementById('name-container');
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const questionContainer = document.getElementById('question-container');
        const optionsContainer = document.getElementById('options-container');
        const feedback = document.getElementById('feedback');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const scoreDisplay = document.getElementById('score');
        const saveStatus = document.getElementById('save-status');
        const restartBtn = document.getElementById('restart-btn');

        startBtn.onclick = () => {
            firstName = document.getElementById('firstName').value.trim();
            lastName = document.getElementById('lastName').value.trim();
            if (firstName && lastName) {
                nameContainer.className = 'hidden';
                quizContainer.className = 'bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl';
                loadQuestion();
            } else {
                alert('Please enter both First Name and Last Name.');
            }
        };

        function loadQuestion() {
            const q = questions[currentQuestion];
            questionContainer.innerHTML = `<p class="text-lg font-semibold">${q.question}</p>`;
            optionsContainer.innerHTML = '';
            q.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full bg-gray-200 py-2 rounded-lg hover:bg-gray-300 transition';
                button.innerText = option;
                button.onclick = () => selectOption(index);
                optionsContainer.appendChild(button);
            });
            feedback.innerText = '';
            nextBtn.style.display = 'none';
            submitBtn.style.display = currentQuestion === questions.length - 1 ? 'block' : 'none';
        }

        function selectOption(index) {
            const q = questions[currentQuestion];
            if (index === q.correct) {
                score++;
                feedback.innerText = 'Correct!';
                feedback.className = 'mt-4 text-center text-green-600';
            } else {
                feedback.innerText = `Incorrect. The correct answer is: ${q.options[q.correct]}`;
                feedback.className = 'mt-4 text-center text-red-600';
            }
            Array.from(optionsContainer.children).forEach(button => button.disabled = true);
            nextBtn.style.display = currentQuestion < questions.length - 1 ? 'block' : 'none';
            submitBtn.style.display = currentQuestion === questions.length - 1 ? 'block' : 'none';
        }

        async function saveScore() {
    try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbwBMXFCaBA1E2SJr2SdCpicghXSljnGPS5sdzlZpdtAU9YdHvDOQ1ntNArI5E0ufVw1NQ/exec', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ firstName, lastName, score })
        });
        const result = await response.json();
        if (result.status === 'success') {
            saveStatus.innerText = 'Score saved successfully!';
            saveStatus.className = 'text-center mb-4 text-green-600';
        } else {
            saveStatus.innerText = 'Error saving score. Please try again.';
            saveStatus.className = 'text-center mb-4 text-red-600';
        }
    } catch (error) {
        saveStatus.innerText = 'Error saving score: ' + error.message;
        saveStatus.className = 'text-center mb-4 text-red-600';
    }
}

        function showResults() {
            quizContainer.className = 'hidden';
            resultsContainer.className = 'bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl';
            scoreDisplay.innerText = `You scored ${score} out of ${questions.length}!`;
            saveScore();
        }

        nextBtn.onclick = () => {
            currentQuestion++;
            loadQuestion();
        };

        submitBtn.onclick = showResults;

        restartBtn.onclick = () => {
            currentQuestion = 0;
            score = 0;
            firstName = '';
            lastName = '';
            nameContainer.className = 'bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl';
            quizContainer.className = 'hidden';
            resultsContainer.className = 'hidden';
            document.getElementById('firstName').value = '';
            document.getElementById('lastName').value = '';
        };
    </script>
</body>
</html>